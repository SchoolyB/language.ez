---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const base = import.meta.env.BASE_URL;
---

<style>
  html, body {
    overflow: hidden;
    height: 100dvh;
  }
</style>

<BaseLayout title="EZ Programming Language - Programming Made EZ">
  <Header />

  <main class="h-[calc(100dvh-4rem)] overflow-y-scroll md:snap-y md:snap-mandatory scroll-smooth">
    <!-- Hero Section -->
    <section class="min-h-[calc(100dvh-4rem)] md:h-[calc(100dvh-4rem)] flex items-center justify-center py-12 sm:py-20 md:snap-start">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="text-5xl sm:text-6xl font-bold tracking-tight mb-4 text-black dark:text-white">
          EZ Programming Language
        </h1>
        <p class="text-2xl sm:text-3xl font-medium mb-10 text-black dark:text-white">
          Programming Made <span class="border-b-4 border-black dark:border-white">EZ</span>
        </p>
        <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
          <a
            href={`${base}docs`}
            class="w-full sm:w-auto px-8 py-3 bg-black dark:bg-white text-white dark:text-black font-semibold rounded-lg hover:opacity-80 transition-opacity"
          >
            Get Started
          </a>
          <a
            href={`${base}downloads`}
            class="w-full sm:w-auto px-8 py-3 border-2 border-black dark:border-white text-black dark:text-white font-semibold rounded-lg hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black transition-colors flex items-center justify-center gap-2"
          >
            Download
            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
            </svg>
          </a>
        </div>
        <div class="mt-8">
          <a
            href={`${base}changelog`}
            id="version-badge"
            class="inline-flex items-center px-4 py-2 text-base font-medium rounded-lg transition-opacity hover:opacity-80"
            style="background-color: var(--ez-gray-bg); border: 1px solid var(--ez-gray-border);"
          >
            <span id="version-text">Loading...</span>
          </a>
        </div>
      </div>
    </section>

    <!-- What EZ Is / Is Not Section -->
    <section class="min-h-[calc(100dvh-4rem)] md:h-[calc(100dvh-4rem)] flex items-center justify-center py-12 sm:py-20 md:snap-start">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Toggle Labels -->
        <div class="flex justify-center gap-12 mb-16">
          <button
            id="tab-is"
            class="ez-tab text-3xl sm:text-4xl font-bold pb-3 border-b-4 border-black dark:border-white text-black dark:text-white transition-all"
            data-tab="is"
          >
            What EZ is
          </button>
          <button
            id="tab-is-not"
            class="ez-tab text-3xl sm:text-4xl font-bold pb-3 border-b-4 border-transparent text-black dark:text-white opacity-40 hover:opacity-70 transition-all"
            data-tab="is-not"
          >
            What EZ is not
          </button>
        </div>

        <!-- Content Container -->
        <div class="relative overflow-hidden">
          <div id="slider" class="flex transition-transform duration-300 ease-in-out">
            <!-- What EZ Is Content -->
            <div class="min-w-full px-4">
              <ul class="space-y-8 max-w-3xl mx-auto text-xl sm:text-2xl leading-relaxed text-black dark:text-white">
                <li>
                  <span class="font-bold text-2xl sm:text-3xl">Simple, not shallow</span>
                  <br class="sm:hidden" /><span class="opacity-80">&mdash; clean syntax that scales with your skill.</span>
                </li>
                <li>
                  <span class="font-bold text-2xl sm:text-3xl">Explicit by design</span>
                  <br class="sm:hidden" /><span class="opacity-80">&mdash; nothing happens behind your back. You control what the code does.</span>
                </li>
                <li>
                  <span class="font-bold text-2xl sm:text-3xl">Catch mistakes before you run</span>
                  <br class="sm:hidden" /><span class="opacity-80">&mdash; types are checked before execution, so errors don't surprise you later.</span>
                </li>
                <li>
                  <span class="font-bold text-2xl sm:text-3xl">Procedural and functional</span>
                  <br class="sm:hidden" /><span class="opacity-80">&mdash; simple data + functions. Composition over abstraction.</span>
                </li>
                <li>
                  <span class="font-bold text-2xl sm:text-3xl">Error messages that teach</span>
                  <br class="sm:hidden" /><span class="opacity-80">&mdash; clear, detailed formatting that tells you what happened, where, why, and how to fix it.</span>
                </li>
              </ul>
            </div>

            <!-- What EZ Is Not Content -->
            <div class="min-w-full px-4">
              <ul class="space-y-8 max-w-3xl mx-auto text-xl sm:text-2xl leading-relaxed text-black dark:text-white">
                <li>
                  <span class="font-bold text-2xl sm:text-3xl">A copycat</span>
                  <br class="sm:hidden" /><span class="opacity-80">&mdash; not chasing trends, not competing with the big names.</span>
                </li>
                <li>
                  <span class="font-bold text-2xl sm:text-3xl">Object-oriented</span>
                  <br class="sm:hidden" /><span class="opacity-80">&mdash; no classes, no objects, no inheritance. Ever.</span>
                </li>
                <li>
                  <span class="font-bold text-2xl sm:text-3xl">A toy</span>
                  <br class="sm:hidden" /><span class="opacity-80">&mdash; simple doesn't mean limited. You can build real things with it.</span>
                </li>
                <li>
                  <span class="font-bold text-2xl sm:text-3xl">Guessing what you meant</span>
                  <br class="sm:hidden" /><span class="opacity-80">&mdash; it does what you write, not what it thinks you wanted.</span>
                </li>
                <li>
                  <span class="font-bold text-2xl sm:text-3xl">Trying to be everything</span>
                  <br class="sm:hidden" /><span class="opacity-80">&mdash; focused scope. Every feature earns its place.</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer as snap section -->
    <div class="md:snap-start">
      <Footer />
    </div>

    <script>
      function initEzTabs() {
        const tabIs = document.getElementById('tab-is');
        const tabIsNot = document.getElementById('tab-is-not');
        const slider = document.getElementById('slider');

        if (!tabIs || !tabIsNot || !slider) return;

        function setActiveTab(tab) {
          if (tab === 'is') {
            tabIs.classList.add('border-black', 'dark:border-white');
            tabIs.classList.remove('border-transparent', 'opacity-40');
            tabIsNot.classList.remove('border-black', 'dark:border-white');
            tabIsNot.classList.add('border-transparent', 'opacity-40');
            slider.style.transform = 'translateX(0)';
          } else {
            tabIsNot.classList.add('border-black', 'dark:border-white');
            tabIsNot.classList.remove('border-transparent', 'opacity-40');
            tabIs.classList.remove('border-black', 'dark:border-white');
            tabIs.classList.add('border-transparent', 'opacity-40');
            slider.style.transform = 'translateX(-100%)';
          }
        }

        tabIs.addEventListener('click', () => setActiveTab('is'));
        tabIsNot.addEventListener('click', () => setActiveTab('is-not'));
      }

      function initVersionBadge() {
        const versionText = document.getElementById('version-text');
        if (!versionText) return;

        fetch('https://api.github.com/repos/SchoolyB/EZ/releases/latest')
          .then(res => res.json())
          .then(data => {
            if (data.tag_name) {
              versionText.textContent = `Latest: ${data.tag_name}`;
            } else {
              versionText.textContent = 'View releases';
            }
          })
          .catch(() => {
            versionText.textContent = 'View releases';
          });
      }

      initEzTabs();
      initVersionBadge();
      document.addEventListener('astro:after-swap', () => {
        initEzTabs();
        initVersionBadge();
      });
    </script>

  </main>
</BaseLayout>
