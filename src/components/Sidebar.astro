---
interface NavItem {
  href: string;
  label: string;
  children?: NavItem[];
}

interface NavSection {
  title: string;
  items: NavItem[];
}

const base = import.meta.env.BASE_URL;

const navigation: NavSection[] = [
  {
    title: 'Getting Started',
    items: [
      { href: `${base}docs/getting-started`, label: 'Installation' },
      { href: `${base}docs/getting-started/hello-world`, label: 'Hello World' },
      { href: `${base}docs/getting-started/repl`, label: 'Using the REPL' },
    ],
  },
  {
    title: 'Language',
    items: [
      { href: `${base}docs/language/keywords`, label: 'Keywords' },
      { href: `${base}docs/language/variables`, label: 'Variables' },
      { href: `${base}docs/language/functions`, label: 'Functions' },
      { href: `${base}docs/language/control-flow`, label: 'Control Flow' },
      { href: `${base}docs/language/types`, label: 'Types' },
      { href: `${base}docs/language/structs`, label: 'Structs' },
      { href: `${base}docs/language/enums`, label: 'Enums' },
      { href: `${base}docs/language/modules`, label: 'Modules' },
    ],
  },
  {
    title: 'Standard Library',
    items: [
      { href: `${base}docs/stdlib`, label: 'Overview' },
      { href: `${base}docs/stdlib/std`, label: '@std' },
      { href: `${base}docs/stdlib/math`, label: '@math' },
      { href: `${base}docs/stdlib/arrays`, label: '@arrays' },
      { href: `${base}docs/stdlib/strings`, label: '@strings' },
      { href: `${base}docs/stdlib/maps`, label: '@maps' },
      { href: `${base}docs/stdlib/time`, label: '@time' },
      { href: `${base}docs/stdlib/bytes`, label: '@bytes' },
      { href: `${base}docs/stdlib/io`, label: '@io' },
      { href: `${base}docs/stdlib/os`, label: '@os' },
    ],
  },
];

const currentPath = Astro.url.pathname;
---

<aside class="w-64 shrink-0 hidden lg:block">
  <nav class="sticky top-20 space-y-8 pr-4 pb-8 max-h-[calc(100vh-5rem)] overflow-y-auto">
    {navigation.map((section) => (
      <div>
        <h3 class="font-semibold text-sm opacity-50 uppercase tracking-wider mb-3 text-black dark:text-white">
          {section.title}
        </h3>
        <ul class="space-y-1">
          {section.items.map((item) => (
            <li>
              <a
                href={item.href}
                class:list={[
                  'block px-3 py-1.5 rounded-lg text-sm transition-all',
                  currentPath === item.href
                    ? 'bg-black dark:bg-white text-white dark:text-black font-medium'
                    : 'opacity-60 hover:opacity-100 hover:bg-gray-100 dark:hover:bg-gray-900 text-black dark:text-white',
                ]}
              >
                {item.label}
              </a>
            </li>
          ))}
        </ul>
      </div>
    ))}
  </nav>
</aside>
